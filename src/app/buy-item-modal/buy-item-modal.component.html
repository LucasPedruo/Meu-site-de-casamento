<div class="modal-container">
  <h2>Comprar {{ item?.title }}</h2>
  
  <div *ngIf="!paymentDataSubmitted" class="form-container">
    <div class="form-group">
      <label for="userName">Nome:</label>
      <input 
        id="userName"
        type="text" 
        [(ngModel)]="userName" 
        placeholder="Seu nome completo"
        required>
    </div>

    <div class="form-group">
      <label for="userEmail">Email:</label>
      <input 
        id="userEmail"
        type="email" 
        [(ngModel)]="userEmail" 
        placeholder="seu@email.com"
        required>
    </div>

    <button (click)="onSubmit()" [disabled]="!userName || !userEmail">
      Continuar para pagamento
    </button>
  </div>

  <div *ngIf="paymentDataSubmitted && !paymentSuccess" class="payment-options">
    <h3>Escolha sua forma de pagamento:</h3>
    
    <div *ngIf="paymentUrl" class="payment-option">
      <h4>Cartão de Crédito/Débito</h4>
      <button (click)="redirectToPayment()">
        Pagar com Mercado Pago
      </button>
    </div>

    <div *ngIf="pixUrl" class="payment-option">
      <h4>PIX</h4>
      <img [src]="pixUrl" alt="QR Code PIX" class="pix-qr-code">
      <button (click)="copyPixCode()">Copiar Código PIX</button>
    </div>
  </div>

  <div *ngIf="paymentSuccess" class="success-message">
    <h3>Pagamento aprovado!</h3>
    <p>Obrigado por sua compra.</p>
  </div>

  <div *ngIf="errorMessage" class="error-message">
    {{ errorMessage }}
  </div>

  <button class="close-button" (click)="closeModal()">Fechar</button>
</div>